---
title: firewalld更改端口记录
top: false
cover: false
toc: true
mathjax: true
date: 2021-05-22 20:47:08
password:
summary:
tags:
- Linux
categories:
- 技术
---
前言：git又不能用了，原来是端口号不行了！于是直接在原服务文件中修改了端口号……此文记录常见的防火墙端口操作。

<!-- more -->

先说前面更改服务文件的操作，重启了防火墙也不能使新端口可用，每次查看监听的端口都是原先的端口在被监听，试着关闭这个进程后，新端口立即可用了。其中的原理还有待学习，推测是一个服务在运行时，更改服务文件并不会重启这个进程，只有关闭进程后使得服务重新运行，服务文件中新的端口号才可用。具体操作如下：

#### 1.端口状态查询

> netstat -lanp   //查看服务器上的服务及端口（有点多，没在用的也显示）
>
> firewall-cmd --list-all //查看已开放端口及服务
>
> netstat -aptn  //查看所有开放的端口号（只看目前开放的端口号）



#### 2.关闭正在监听的端口

> kill -9 5918  //9518为想关闭的进程号，即查询时显示的PID



##### 下面是端口操作笔记：

#### netstat命令各个参数说明如下：

> -t : 指明显示TCP端口
>
> -u : 指明显示UDP端口
>
> -l : 仅显示监听套接字(所谓套接字就是使应用程序能够读写与收发通讯协议(protocol)与资料的程序)
>
> -p : 显示进程标识符和程序名称，每一个套接字/端口都属于一个程序
>
> -n : 不进行DNS轮询，显示IP(可以加速操作)

例如：

> netstat -ntlp //查看当前所有tcp端口
>
> netstat -ntulp |grep 80 //查看所有80端口使用情况
>
> netstat -an | grep 3306 //查看所有3306端口使用情况
>
> netstat -lanp //查看一台服务器上面哪些服务及端口
